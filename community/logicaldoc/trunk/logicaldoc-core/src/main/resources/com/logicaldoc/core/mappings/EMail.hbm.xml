<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping default-lazy="false">
	<class name="com.logicaldoc.core.communication.EMail" table="ld_email">
		<cache usage="read-write" />
        <id name="id" type="long" column="ld_id" unsaved-value="0">
            <generator class="increment" />
        </id>
        <property name="accountId" type="int" column="ld_accountid" />
        <property name="emailId" type="string" column="ld_emailid" />
		<property name="messageText" type="string" column="ld_messageText" length="255" />
		<property name="author" type="string" column="ld_author" length="30" />
		<property name="subject" type="string" column="ld_subject" length="255" />
		<property name="sentDate" type="string" column="ld_sentdate" length="20" />
		<property name="read" type="int" column="ld_red" />
		<property name="authorAddress" type="string" column="ld_authoraddress" length="255" />
		<property name="userName" type="string" column="ld_username" length="30" />
		<property name="folder" type="string" column="ld_folder" length="30" />

		<map name="attachments" lazy="false" table="ld_attachment" cascade="all">
			<key column="ld_messageid" />
			<map-key column="ld_partid" type="int" />
			<composite-element class="com.logicaldoc.core.communication.Attachment">
				<property name="filename" type="string" column="ld_filename" length="255" />
				<property name="icon" type="string" column="ld_icon" length="255" />
				<property name="mimeType" type="string" column="ld_mimetype" length="255" />
			</composite-element>
		</map>

		<set name="recipients" table="ld_recipient" lazy="false" cascade="all">
			<key column="ld_messageid" />
			<composite-element class="com.logicaldoc.core.communication.Recipient">
				<property name="address" type="string" column="ld_address" length="255" not-null="true" />
				<property name="name" type="string" column="ld_name" length="255" />
			</composite-element>
		</set>
	</class>
</hibernate-mapping>
